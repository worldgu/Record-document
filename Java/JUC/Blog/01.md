# 线程的基本概念

线程：操作系统能够继续宁运算调度的最小单位，他被包含在进程之中，是进程中的实际运作单位，一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。在Unix System V及SunOS中也被称为轻量进程（lightweight processes），但轻量进程更多指内核线程（kernel thread），而把用户线程（user thread）称为线程。

**线程是独立调度和分派的基本单位**

进程（Process）: 计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位.

---

​		一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。所以多进程要比多线程健壮。

​		进程切换时，消耗的资源大，效率高。所以涉及到频繁的切换时，使用线程要好于进程。同样如果要求同时进行并且又要共享某些变量的并发操作，只能用线程不能用进程

### 进程与线程的区别:

​        执行过程：每个独立的进程程有一个程序运行的入口、顺序执行序列和程序入口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。

> **补充:**
>
> **根本区别：**进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位
>
> **在开销方面：**每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销；线程可以看做轻量级的进程，**同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器（PC），线程之间切换的开销小。**
>
> **所处环境：**在操作系统中能同时运行多个进程（程序）；而在同一个进程（程序）中有多个线程同时执行（通过CPU调度，在每个时间片中只有一个线程执行）
>
> **内存分配方面：**系统在运行的时候会为每个进程分配不同的内存空间；而对线程而言，除了CPU外，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源），线程组之间只能共享资源。
>
> **包含关系：**没有线程的进程可以看做是单线程的，如果一个进程内有多个线程，则执行过程不是一条线的，而是多条线（线程）共同完成的；线程是进程的一部分，所以线程也被称为轻权进程或者轻量级进程。
> 原文链接：https://blog.csdn.net/kuangsonghan/article/details/80674777



**优缺点：**

　　线程执行开销小，但是不利于资源的管理和保护。线程适合在SMP机器（双CPU系统）上运行。

　　进程执行开销大，但是能够很好的进行资源管理和保护。进程可以跨机器前移。



**何时使用多进程，何时使用多线程？**

对资源的管理和保护要求高，不限制开销和效率时，使用多进程。

要求效率高，频繁切换时，资源的保护管理要求不是很高时，使用多线程。

> 个人总结:
>
> 进程，线程，纤程
>
> 进程是在操作系统层面进行切换，CPU通过给每个进程分配至CPU时间片，通过**CPU时间片分配算法**来实现上下文，程序之间切换开销大。
>
> 线程运行在进程空间，共享空间与时间，每个线程都有自己独立的运行栈和程序计数器（PC），线程之间切换的开销小。
>
> JVM相对于操作系统来说是一个进程，线程运行在JVM这个进程值中，纤程在java线程之中运行，切换调度比进程开销更少。
>
> 进程数量少，线程数量多，纤程数量上万
>
> 到目前OpenJDK14为止,java本身并不支持纤程，需要引入外部jar包。

